//Libraries
//Library for use with DHT22 temperature sensor
#include <Adafruit_DHT.h>


//Constants
#define DHTPIN D6   //The pin we will read the sensor data from

#define DHTTYPE DHT22  //The type of sensor we're using

DHT dht(DHTPIN, DHTTYPE);   //Initialising the dht sensor


//Variables
int led = D7;  // The on-board LED

float hum;  //Stores the humidity value

float tempC;    //Stores the temperature in degrees Celcius


//Setup
void setup() 
{
    
  pinMode(led, OUTPUT);
  
  dht.begin();
  
}


//Loop
void loop() {
  digitalWrite(led, HIGH);   // Turn ON the LED
  
  hum = dht.getHumidity(); //Gets humidity data
  
  // Publishing humidity data
  String humString = String(hum);
  Particle.publish("hum", humString, PRIVATE);
  
  tempC = dht.getTempCelcius(); //Gets temperature data
  
  //Publishing temperature data
  String tempString = String(tempC);
  Particle.publish("temp", tempString, PRIVATE);
  
  delay(10000);               // Wait for 30 seconds

  digitalWrite(led, LOW);    // Turn OFF the LED
  delay(10000);               // Wait for 30 seconds
}
